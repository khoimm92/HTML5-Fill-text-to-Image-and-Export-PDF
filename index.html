<!DOCTYPE html>
<html>
<link rel="stylesheet" href="bootstrap.min.css" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,800,700' rel='stylesheet' type='text/css'>
<title>Quick export PDF</title>
<style>
    @font-face {
        font-family: 'Open Sans', sans-serif;
    }
</style>
<script src="jquery.min.js"></script>
<!--<script src="jspdf.min.js"></script>-->
<script src="jspdf.debug.js"></script>
<script src="html2canvas.js"></script>
<body>
<div class="row">
    <div class="col-md-5" style="margin: 20px">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Name" id="name" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Company" id="company" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Address" id="address" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Phone" id="phone" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Emai" id="email" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Guest name" id="guest_name" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Confirm No" id="confirm_no" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Arrival date" id="arrival_date" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Arrival flight" id="arrival_flight" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Arrival time" id="arrival_time" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Depature date" id="depature_date" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Depature flight" id="depature_flight" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Depature time" id="depature_time" onkeyup="apply()">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Room type" id="room_type" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Total adult/child" id="total_adult" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Room rate" id="room_rate" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Pickup service" id="pickup_service" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Payment method" id="payment_method" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Guarantee by" id="guarantee" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Special request" id="request" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Confirm by" id="confirm_by" onkeyup="apply()">
                </div>
                <div class="form-group">
                    <select class="form-control" id="seats_option" onchange="marker();apply()">
                        <option selected>Seat option</option>
                        <option>4</option>
                        <option>7</option>
                        <option>16</option>
                    </select>
                </div>

                <button class="btn btn-success" onclick="exportPdf()">Export</button>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <canvas id="myCanvas" width="1500" height="1800">
        </canvas>
    </div>
</div>
<script>
    var c = $('#myCanvas')[0];
    var ctx = c.getContext('2d');

    var img = new Image();
    img.onload = function() {
        ctx.drawImage(img, 0, 0,1500, 1800);
        };
    img.src = "doc.png";

    function apply() {
        ctx.clearRect(0, 0, c.width, c.height);
        ctx.drawImage(img, 0, 0,1500, 1800);

        ctx.fillStyle = '#4c4c4e';
        //name
        ctx.font = "bold 27px Open Sans";
        ctx.fillText($('#name').val(), 142, 360);
        //company
        ctx.font = "25px Open Sans";
        ctx.fillText($('#company').val(), 253, 385);
        //address
        ctx.fillText($('#address').val(), 200, 410);
        //phone
        ctx.fillText($('#phone').val(), 223, 436);
        //email
        ctx.fillText($('#email').val(), 200, 463);
        //guest name
        ctx.fillText($('#guest_name').val(), 204, 533);

        ctx.font = "bold 27px Open Sans";
        ctx.fillText($('#guest_name').val(), 312, 611);
        //confirm no
        ctx.fillText($('#confirm_no').val(), 330, 637);
        //arrival date
        ctx.fillText($('#arrival_date').val(), 289, 663);
        //arrival flight
        ctx.fillText($('#arrival_flight').val(), 652, 663);
        //arrival time
        ctx.fillText($('#arrival_time').val(), 1040, 663);
        //depature date
        ctx.fillText($('#depature_date').val(), 327, 688);
        //depature flight
        ctx.fillText($('#depature_flight').val(), 652, 688);
        //depature time
        ctx.fillText($('#depature_time').val(), 1040, 688);
        //room type
        ctx.fillText($('#room_type').val(), 280, 714);
        //total adult
        ctx.fillText($('#total_adult').val(), 335, 740);
        //room rate
        ctx.fillText($('#room_rate').val(), 266, 765);
        //pickup
        ctx.fillText($('#pickup_service').val(), 314, 791);
        //payment
        ctx.fillText($('#payment_method').val(), 357, 816);
        //payment
        ctx.fillText($('#guarantee').val(), 304, 842);
        //request
        ctx.fillText($('#request').val(), 335, 872);

        //confirm_by
        ctx.font = "25px Open Sans";
        ctx.fillText($('#confirm_by').val(), 817, 1641);
    }
        //export

    function exportPdf() {
        html2canvas($("#myCanvas"), {
            onrendered: function(canvas) {
                var imgData = canvas.toDataURL(
                        'image/png');
                var doc = new jsPDF('p','pt','a2');
                doc.addImage(imgData, 'PNG', 0, 0,1190,1683);
                doc.save('demo.pdf');
            }
        });
    }


    function marker(){
        ctx.clearRect(0, 0, c.width, c.height);
        ctx.drawImage(img, 0, 0,1500, 1800);

        //mark icon
        seats_option = $('#seats_option').val();
        base_image = new Image();
        base_image.src = 'mark_ico.png';
        base_image.onload = function(){
            switch (parseInt(seats_option)){
                case 4:
                    ctx.drawImage(base_image, 153, 1238);
                    break;
                case 7:
                    ctx.drawImage(base_image, 565, 1238);
                    break;
                case 16:
                    ctx.drawImage(base_image, 1003, 1238);
                    break;
            }
        }
    }
</script>

</body>
</html>
